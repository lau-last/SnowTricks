{% extends 'base.html.twig' %}

    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('styles/home.css') }}">
    {% endblock %}
    {% block javascripts %}
        <script>
            document.addEventListener('DOMContentLoaded', function () {

                let button = document.getElementById("load-more");
                let container = document.getElementById("tricks-presentation");

                document.getElementById("load-more").addEventListener("click", function (){

                    button.disabled = true;

                    let request = new XMLHttpRequest();
                    let currentTrick = document.getElementsByClassName("trick-card-container").length;

                    request.open("POST", "/load_trick", true);
                    request.setRequestHeader("Content-type", "application/json");
                    request.send(JSON.stringify({'p': currentTrick}));

                    request.onreadystatechange = function(){

                        if (request.status === 200 && request.readyState === 4){

                            container.innerHTML += request.responseText;
                            button.disabled = false;

                        }

                    }

                });

            }, false);
        </script>
    {% endblock %}

{% block body %}

    <header>
        <div class="d-flex justify-content-center align-items-center">
            <h1>SnowTrick</h1>
            <a href="#tricks-presentation"><i class="bi bi-arrow-down-circle-fill fs-1"></i></a>
        </div>
    </header>

    <section>

        <div class="p-5 d-flex justify-content-center flex-wrap" id="tricks-presentation">
            {% include 'home/_trick-cards.html.twig' %}
        </div>

        <div class="d-flex justify-content-center mb-5">
            <button type="button" id="load-more" class="btn btn-success">Load More</button>
        </div>

    </section>



{% endblock %}
